"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){function o(e){""===e&&m.error("file is empty.");var o=e.split(".");return o=o[1]}function n(e){var o=e.getAttribute("data-format");return o}function t(e){var n=void 0,t=void 0,a=void 0;n=l("#hi-form-template input[name=refresh]"),n.value=!0,a=l("#hi-form-template input[name=newParameters]"),"efwsr"===o(d.file)&&"report"===o(window.reportParameters.reportFile)?(t=window.location.search.split("&").splice(0,3).join("&"),a.value=!0):(t=window.location.search.split("&").splice(0,2).join("&"),a.value=!1),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var r=window.location.origin+window.location.pathname+t,i=l(_.template(c.formTemplate)({url:r,refresh:n.value,newParameters:a.value})),s="";return l.each(e,function(e,o){if(l.isArray(o)&&o.length>0)for(var n=0;n<o.length;n++)s=document.createElement("input"),s.type="hidden",s.name+=e,s.value+=o[n],i.append(s);else s=document.createElement("input"),s.type="hidden",s.name+=e,s.value+=o,i.append(s)}),i.appendTo("body").submit().remove()}function a(e){if("efwsr"===o(d.file))t(e);else if("report"===o(d.file)){var n=function(){var o=void 0,n=void 0;o=l("#hi-adhoc-template input[name=refresh]"),o.value=!0,n=l("#hi-adhoc-template input[name=mode]"),n.value="dashboard";var t=window.location.search.split("&").splice(0,3).join("&");window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var a=window.location.origin+window.location.pathname+t,r=l(_.template(c.adhocTemplate)({url:a,refresh:o.value,mode:n.value}));e=e?JSON.stringify(e):"",e=l.parseJSON(e);var i="";return l.each(e,function(e,o){if(l.isArray(o)&&o.length>0)for(var n=0;n<o.length;n++)i=document.createElement("input"),i.type="hidden",i.name+=e,i.value+=o[n],r.append(i);else i=document.createElement("input"),i.type="hidden",i.name+=e,i.value+=o,r.append(i)}),{v:r.appendTo("body").submit().remove()}}();if("object"===("undefined"==typeof n?"undefined":_typeof(n)))return n.v}else t(e)}function r(){var e=window.DashboardGlobals.enableReportSave;return e}function i(e,n,t){function a(){var e=document.querySelectorAll("style"),o=[];if(!e)return"";for(var n=0;n<e.length;n+=1){var t=e[n];if(""===t.textContent&&t.sheet.cssRules){var a=[].reduce.call(t.sheet.cssRules,function(e,o){return e+=o.cssText},"");o.push(a)}}return o.join("\n")}var r="<base href='"+window.DashboardGlobals.baseUrl+"'>",i=l("html").clone(),d=i.find("head"),c=l("html").contents().find("iframe").filter("iframe[name='viz']");i="undefined"==typeof c||0===c.length?i:c.contents().find("html").clone(),i.find("script:not([data-strip=false])").remove();var m=document.createElement("style");m.type="text/css",m.textContent=a(),d.append(r),d.append(m),d.append("<style>.hidden-print {display:none !important;} .visible-print {display: block !important;}</style>");var u="<html>"+i.html()+"</html>";u=encodeURIComponent(window.btoa?btoa(unescape(encodeURIComponent(u))):s.encode(u));var w={xml:u,format:e},h=p.getAllVariables(),v={};for(var b in h)if(h.hasOwnProperty(b)){var y=h[b];""!==y&&(v[b]=y)}return w.dir=window.DashboardGlobals.folderpath,w.filename=window.DashboardGlobals.file,w.reportType=o(window.DashboardGlobals.file),w.reportNameParam=window.DashboardGlobals.fileTitle,w.reportFile=window.DashboardGlobals.file,w.reportFile=v?JSON.stringify(v):"",w.resultDirectory=t||window.DashboardGlobals.optionalReportParams.location||"Save Result",w.reportName=n||window.DashboardGlobals.optionalReportParams.reportname,f?void 0:(l.download(window.DashboardGlobals.reportDownload,w),u)}var l=e.$,d=e.DashboardGlobals,s=e.Base64,f=e.noSend,p=e.Dashboard;l.notifyDefaults({position:"fixed",placement:{from:"bottom",align:"right"},mouse_over:"pause",delay:3e3,timer:1e3});var c={formTemplate:'\n            <form id="hi-form-template" method="POST" action="{{url}}" target="_self" style="display:none"><input type="hidden" name="refresh" value="{{refresh}}"><input type="hidden" name="newParameters" value="{{newParameters}}"></form>',adhocTemplate:'\n            <form id="hi-adhoc-template" method="POST" action="{{url}}" target="_self" style="display:none"><input type="hidden" name="refresh" value="{{refresh}}"><input type="hidden" name="mode" value="{{mode}}"></form>'},m={info:function(e){return l.notify({message:e,icon:"fa fa-info"},{type:"info"})},warn:function(e){return l.notify({message:e,icon:"fa fa-exclamation-triangle"},{type:"warning"})},success:function(e){return l.notify({message:e,icon:"fa fa-check"},{type:"success"})},error:function(e){return l.notify({message:e,icon:"fa fa-times"},{type:"danger"})}};l(document).ready(function(){l("#hi-cache-toolbar-refresh").on("click",function(){var e=void 0,o={},n=void 0,t=void 0,r={}.hasOwnProperty,i=document.getElementById("hi-adhoc-iframe");i?(i=i.contentWindow,i.Dashboard.getAllVariables(),t=i.Dashboard.getAllVariables()):t=p.getAllVariables(),"dashboard"===t.mode&&delete t.mode;for(e in t)r.call(t,e)&&(n=t[e],""===n||"object"===("undefined"==typeof n?"undefined":_typeof(n))&&0===n.length||(o[e]=n));a(o)}),l("#hi-export-pdf, #hi-export-png, #hi-export-jpg").on("click",function(e){e.preventDefault();var o=r(this),t=n(this);return"true"!==o?void i(t):(window.HDIUI.showExport(),void window.HDIUI.filebrowser.$el.off("click.saveAs","#download-report").on("click.saveAs","#download-report",function(){var e=void 0,o=void 0;return window.HDIUI.filebrowser.$("#error-folder").addClass("hidden"),(o=window.HDIUI.filebrowser.getSelected())?l("#download-report-name").validate()?(e=window.HDIUI.filebrowser.$("#download-report-name").val(),window.HDIUI.filebrowser.hide(),void window.HDIUI.filebrowser.$el.one("hidden.bs.modal",function(){i(t,e,o.actual)})):!1:(window.HDIUI.filebrowser.$("#error-folder").removeClass("hidden"),!1)}))})})}(window);
//# sourceMappingURL=slvIframe.js.map
