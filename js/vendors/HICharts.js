"use strict";function inherit(t,e){var n=function(){};return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e}function HIchart(t){if(!(t.data.jsondata&&t.data.Dimension&&t.data.Measure&&t.type&&t.placeholder&&t.data.jsondata.length&&t.data.Dimension.length&&t.data.Measure.length))return console.error("There is some problem in the data or the configuration of the chart. Please check."),void d3.select(t.placeholder).append("div").attr("class","HI-Core-Error alert alert-danger").text("There is some problem in the data or the configuration of the chart. Please check.");This=this;d3.scale.category20c();this.tooltip={},this.tooltip.Content=null,this.infoWindow={},this.infoWindow.Content=null,HI.chartMap[t.type].setConfig(t),this.internal=HI.chartMap[t.type];var e={};e.Dimension=t.data.Dimension,e.Measure=t.data.Measure;var n=HI.chartMap[t.type].convertToTree(t.data.jsondata,e);HI.chartMap[t.type].draw(n),function o(t,e,n){Object.keys(t).forEach(function(r){e[r]=t[r].bind(n),Object.keys(t[r]).length>0&&o(t[r],e[r],n)})}(HIchart.prototype,this,this)}function InternalFunction(t){}function Tree(){this.root=null,this.arrayOfNodes=[]}function HISunburst(){}function colorgradient(t,e){var n=d3.rgb(t).darker(e).toString();return n}function isFunction(t){var e={};return t&&"[object Function]"===e.toString.call(t)}function HICirclepacking(){}function HIDendrogram(){}function HIMap(){}function infoWindowContent(t,e,n){if(!(t.children.length>0))return void e.push(t);var o=t.children.length;e.push(t);for(var r=0;r<o;r++)infoWindowContent(t.children[r],e,n),0!==t.children[0].children.length&&e.pop();if(0===t.children[0].children.length){n.push(e.slice(0));for(var r=0;r<t.children.length;r++)e.pop()}}function setcontent(t){var e=[],n=[];t.visit=0;infoWindowContent(t,e,n);return n}function isFunction(t){var e={};return t&&"[object Function]"===e.toString.call(t)}function HIRadialDendrogram(){}function HIBubblechart(){}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},HI={version:.1};HI.chartMap={},HI.generate=function(t){return new HIchart(t)},HI.register=function(t){if(!HI.chartMap[t]){var e=(inherit(InternalFunction,t),new t),n=/^function\s+([\w\$]+)\s*\(/.exec(e.constructor.toString());HI.chartMap[n[1]]=e}};var This;HI.fn={api:HIchart.prototype,internal:InternalFunction.prototype},HI.fn.api.apiList=function(){var t=this,e={};Object.keys(t).forEach(function(n){"internal"!==n&&(Object.keys(t[n]).length>0?Object.keys(t[n]).forEach(function(o){e[n+"."+o]=t[n]}):e[n]=t[n])}),e["tooltip.Content"]=null,e["infoWindow.Content"]=null,console.log(e)},HI.fn.api.internalFunctionList=function(){console.log(Object.getPrototypeOf(Object.getPrototypeOf(this.internal)))},HI.fn.api.getAllNodes=function(){return this.internal.nodeValue()},HI.fn.api.dataColor=function(t){this.internal.updateDataAttributes(t)},HI.fn.api.dataColors=function(t){this.internal.getColor(t)},HI.fn.api.tooltip=function(){},HI.fn.api.tooltip.show=function(){this.internal.isTooltipShow=!0,this.internal.setTooltipStatus(!0)},HI.fn.api.tooltip.hide=function(){this.internal.isTooltipShow=!1,this.internal.setTooltipStatus(!1)},HI.fn.api.tooltip.style=function(t){this.internal.updateTooltipAttributes("style",t)},HI.fn.api.infoWindow=function(){},HI.fn.api.infoWindow.hide=function(){this.internal.setInfoWindowStatus(!1)},HI.fn.api.infoWindow.show=function(){this.internal.setInfoWindowStatus(!0)},HI.fn.internal.setInfoWindowStatus=function(t){null!==t?this.isInfoWindowDisplay=t:this.isInfoWindowDisplay=!1},HI.fn.internal.nodeValue=function(){for(var t=that.node;!t.empty()&&!t.select("g").empty();)t=t.select("g");return t[0][0].childNodes.length>0&&!function(){var e=[];t[0].forEach(function(t){e.push(t.childNodes[0])}),t[0]=e}(),t},HI.fn.internal.updateDataAttributes=function(t){var e=this.nodeValue(),n=Object.keys(t),o=[],r=[];n.forEach(function(e){"object"!==_typeof(t[e])?r.push({key:e,color:t[e]}):Array.isArray(t[e].value)?t[e].value.forEach(function(n){o.push({key:e,value:n,color:t[e].color})}):o.push({key:e,value:t[e].value,color:t[e].color})}),r.forEach(function(t){e.style("fill",function(e){return e.key===t.key?t.color:d3.rgb(d3.select(this).style("fill"))})}),o.forEach(function(t){e.style("fill",function(e){return e.key===t.key&&e.keyvalue===t.value?t.color:d3.rgb(d3.select(this).style("fill"))})}),this.updateTooltipAttributes("dataColor",t)},HI.fn.internal.updateTooltipAttributes=function(t,e){var n=d3.select(".HI-Core-tooltip");if("style"===t)return void Object.keys(e).forEach(function(t){n=n.style(t,e[t])});if("dataColor"===t){var o=that.node;o.on("mouseover",function(t){that.setTooltip();var e=that.tooltipContent(t,d3.select(this));n.html(e);var o=that.tooltipStatus,r=void 0;r=o===!1?"none":"block",d3.select(".HI-Core-tooltip").transition().duration(100).style("opacity",.9).style("display",r)}).on("mouseout",function(t){d3.select(".HI-Core-tooltip").transition().duration(1500).style("opacity",0)})}},HI.fn.internal.getColor=function(t){var e=that.node;e.style("fill",t)},HI.fn.internal.setTooltipStatus=function(t){null!==t?that.tooltipStatus=t:that.tooltipStatus=!0},HI.fn.internal.initTooltip=function(t){var e=d3.select(t).append("div").attr("class","HI-Core-tooltip").style("display","none").style("background-color","#fff").style("z-index",1040);return e},HI.fn.internal.infoWindow=function(t){var e=this,n=e.nodeValue(),o=d3.select(t).append("div").attr("id","HI-infoWindow").attr("class","col-md-12").attr("class","HI-Core-popup").style("z-index",2e3).style("display","none");n.on("click",function(t){var n=" ",r=d3.event.pageX,a=d3.event.pageY,i=void 0;e.isInfoWindowDisplay?(i="block",that.tooltipStatus=!1):(i="none",e.isTooltipShow===!1?that.tooltipStatus=!1:that.tooltipStatus=!0),o.style("left",r+"px").style("top",a+"px");var l='<span id="close" class="HI-Core-InfoWindowCloseButton"><i class="fa fa-times" aria-hidden="true"></i></span>';n=e.infoWindowContent(t),l+=n,d3.select("#HI-infoWindow").style("opacity",.9).style("display",i),o.html(l),d3.select("#close").on("click",function(){d3.select("#HI-infoWindow").style("opacity",0).style("display","none"),e.isTooltipShow===!1?that.tooltipStatus=!1:that.tooltipStatus=!0})})},HI.fn.internal.infoWindowContent=function(t){var e="";return isFunction(This.infoWindow.Content)?e=This.infoWindow.Content(t):(e="<table class='table_Class-informationWindow'>",e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>",e+="</table>")},HI.fn.internal.setTooltip=function(){var t=d3.event.pageX,e=d3.event.pageY;d3.select(".HI-Core-tooltip").style("left",t+"px").style("top",e+"px")},HI.fn.internal.colorGradient=function(t,e){var n=d3.rgb(t).darker(e).toString();return n},HI.fn.internal.tooltipContent=function(t){var e;if(isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);var n="",o=t;for(o.depth;o.depth>1;)o=o.parent;return n+="key-"+o.key+"value-"+o.keyvalue,e="<table class='table_Class'>",e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>",e+="</table>"},HI.fn.internal.initLegend=function(t){var e=(d3.select(this.hart.placeholder).node().parentNode.getBoundingClientRect().width,d3.select(t).node().parentNode.getBoundingClientRect().height,d3.select(t).select("svg"));return e},HI.fn.internal.isLegendShow=function(){return!1},HI.fn.internal.transformLegend=function(){var t=void 0;return t="right"===this.hart.legend.position?d3.select(this.hart.placeholder).node().parentNode.getBoundingClientRect().width-20:10,"translate("+t+",0)"},HI.fn.internal.setLegend=function(t){var e=this,n=e.initLegend(t),o=e.nodeValue(),r={w:70,h:15,s:3,r:3},a=n.append("g").attr("transform",e.transformLegend).attr("class","HI-Core-legend").selectAll(".LegendClass").data(o[0]).enter().append("g").attr("class","LegendClass").style("visibility",function(t){return _.isLegendShow()?"visible":"hidden"}).style("cursor","pointer");a.append("text").text(function(t){return t.__data__.key}).style("pointer-events","none").attr("x",r.r+r.w/2+1).attr("y",function(t,e){return e*(r.h+r.s)+9}),a.append("rect").attr("class","RectangleClass").attr("x",r.r).attr("y",function(t,e){return e*(r.h+r.s)}).attr("width",r.w).attr("height",r.h).style("fill-opacity",0),a.append("line").attr("class","LineClass").attr("x1",r.r).attr("y1",function(t,e){return e*(r.h+r.s)}).attr("x2",r.r+r.w/2).attr("y2",function(t,e){return e*(r.h+r.s)}).style("stroke",function(t){return t.style.fill}).style("stroke-width",10)},HI.fn.internal.convertToTree=function(t,e){var n=t.length,o=e.Dimension.length,r=e.Measure.length,a={},i={},l=new Tree;if("object"===_typeof(e.Dimension[0]))var s=Object.keys(e.Dimension[0]),d=s,c=l.insert(d[0],d[0],i,t);else var c=l.insert(e.Dimension[0],e.Dimension[0],i,t);for(var u,p=0;p<n;p++){c=l.root;for(var f=0;f<o;f++){var h=l.arrayOfNodes;if(0===f){c=null;for(var y=0;y<h.length;y++)if("object"===_typeof(e.Dimension[f])){var s=Object.keys(e.Dimension[f]);if(d=s[0],h[y].key===d&&h[y].value===t[p][d]){c=h[y];break}}else if(d=e.Dimension[f],h[y].key===d&&h[y].value===t[p][d]){c=h[y];break}}else{for(var v=c.children.length,y=0;y<v;y++){if("object"===_typeof(e.Dimension[f])){var s=Object.keys(e.Dimension[f]);d=s[0]}else d=e.Dimension[f];if(c.children[y].key===d&&c.children[y].value===t[p][d]){c=c.children[y],u=!0;break}}if(!u)if("object"===_typeof(e.Dimension[f])){var s=Object.keys(e.Dimension[f]);d=s[0],k=e.Dimension[f][d];var g={};g.dimensionproperty=k,a[k.property.coordinate[0]]=t[p][k.property.coordinate[0]],a[k.property.coordinate[1]]=t[p][k.property.coordinate[1]],g.containsCoordinate=a,i=g,c=l.insert(d,t[p][d],i,t,c),a={}}else d=e.Dimension[f],c=l.insert(e.Dimension[f],t[p][e.Dimension[f]],i,t,c);u=!1}if(!c)if("object"===_typeof(e.Dimension[f])){var s=Object.keys(e.Dimension[f]);d=s[0];var k=e.Dimension[f][d],g={};g.dimensionproperty=k,a[k.property.coordinate[0]]=t[p][k.property.coordinate[0]],a[k.property.coordinate[1]]=t[p][k.property.coordinate[1]],g.containsCoordinate=a,i=g,c=l.insert(d,t[p][d],i,t,l.root),a={}}else d=e.Dimension[f],c=l.insert(e.Dimension[f],t[p][e.Dimension[f]],i,t,l.root)}for(var f=0;f<r;f++)i={},c=l.insertleafnode(e.Measure[f],t[p][e.Measure[f]],i,t,c)}var b=l.root;return b};var nodeObject={};nodeObject.Node=function(t,e,n){this.property=n,this.key=t,this.keyvalue=e,this.value=e,this.parent=null,this.children=[],this.parentArray=[]},Tree.prototype.insert=function(t,e,n,o,r){var a=(this.root,new nodeObject.Node(t,e,n));if(this.arrayOfNodes.push(a),this.root){r.children.push(a),a.parent=r,r.parentArray.forEach(function(t){a.parentArray.push(t)}),a.parentArray.push(r);var i=r.children.length;return r=r.children[i-1]}return this.root=a,this.root},Tree.prototype.insertleafnode=function(t,e,n,o,r){var a=new nodeObject.Node(t,e,n);return this.arrayOfNodes.push(a),r.children.push(a),a.parent=r,r.parentArray.forEach(function(t){a.parentArray.push(t)}),a.parentArray.push(r),r},function(){HI.register(HISunburst)}(),HISunburst.prototype.setConfig=function(t){this.hart=t};var that,color;HISunburst.prototype.draw=function(t){function e(t){for(var e="",n=t.depth;t.depth>1;)t=t.parent;e+="key-"+t.key+"value-"+t.keyvalue;var o=colorgradient(s(e),n);return o}function n(t){t.x0=t.x,t.dx0=t.dx}that=this;var o=this.hart,r=(o.data.Measure[0],["#01cce3","#5366d0","#ff1d45","#ffb200","#01c993","#5dffda","#ff3c80","#677077","#d3eeef","#9068be","#daad86","#3fb0ac","#fae596","#7082d9","#c43235","#fccdd3","#bbc4ef","#cdd422","#b5a397","#f89400"]),a=d3.select(o.placeholder).node().parentNode.getBoundingClientRect().width,i=d3.select(o.placeholder).node().parentNode.getBoundingClientRect().height,l=Math.min(a,.95*i)/2,s=d3.scale.ordinal().range(r),d=d3.select(o.placeholder).append("svg").attr("viewBox","0 0 "+a+" "+i).append("g").attr("transform","translate("+a/2+","+.52*i+")"),c=this.initTooltip(o.placeholder),u=d3.svg.arc().startAngle(function(t){return t.x}).endAngle(function(t){return t.x+t.dx}).innerRadius(function(t){return Math.sqrt(t.y)}).outerRadius(function(t){return Math.sqrt(t.y+t.dy)});t||console.error("data not found");var p=d3.layout.partition().sort(null).size([2*Math.PI,l*l]).value(function(t){return t.keyvalue}),f=d.datum(t).selectAll(".HI-Sunburst").data(p.nodes).enter().append("g").attr("class","HI-Sunburst"),h=f.append("path").attr("id",function(t,e){return"paa"+e}).attr("display",function(t){return t.depth?null:"none"}).attr("d",u).style("stroke","#fff").style("fill",e).on("mouseover",function(t){that.setTooltip();var e=d3.select(this),n=that.tooltipContent(t,e);c.html(n);var o=that.tooltipStatus,r=void 0;r=o===!1?"none":"block",d3.select(".HI-Core-tooltip").transition().duration(100).style("opacity",.9).style("display",r)}).on("mouseout",function(t){d3.select(".HI-Core-tooltip").transition().duration(1500).style("opacity",0)}).style("fill-rule","evenodd").each(n);f.append("text").attr("dy",function(t){return(Math.sqrt(t.y+t.dy)-Math.sqrt(t.y))/2+6}).attr("width",function(t){return t.dx}).style("fill",function(t){return"#fff"}).append("textPath").attr("startOffset","10%").style("text-anchor","start").style("font-size","1rem").attr("xlink:href",function(t,e){return"#paa"+e}).text(function(t){return 0===t.depth?"":t.keyvalue}).each(function(t,e){0===t.depth?d3.select(this).text(""):t.dx*((Math.sqrt(t.y+t.dy)-Math.sqrt(t.y))/2-50+Math.sqrt(t.y))<this.getComputedTextLength()?d3.select(this).text(""):d3.select(this).text(t.keyvalue)});this.node=h,this.setLegend(o.placeholder),this.infoWindow(o.placeholder)},HISunburst.prototype.tooltipContent=function(t,e){var n;if(isFunction(This.tooltip.Content))return n=This.tooltip.Content(t);var o="",r=t;for(r.depth;r.depth>1;)r=r.parent;o+="key-"+r.key+"value-"+r.keyvalue;var a=d3.rgb(e.style("fill"));return n="<table class='table_class'>",n+="<tr><td>"+t.key+"</td><td><span style = 'background-color:"+a+"'></span>"+t.keyvalue+"</td></tr>",n+="</table>"},HI.fn.internal.setLegend=function(t){var e=this,n=e.initLegend(t),o=e.nodeValue(),r=e.transformLegend(),a={w:70,h:15,s:3,r:3},i=n.append("g").attr("transform",r).attr("class","HI-Core-legend").selectAll(".LegendClass").data(o[0]).enter().append("g").attr("class","LegendClass").style("visibility",function(t){return e.isLegendShow()?"visible":"hidden"}).style("cursor","pointer");i.append("text").text(function(t){return 0===t.__data__.depth?"":t.__data__.key}).style("pointer-events","none").attr("x",a.r+a.w/8+1).attr("y",function(t,e){return e*(a.h+a.s)+9}),i.append("rect").attr("class","RectangleClass").attr("x",a.r).attr("y",function(t,e){return e*(a.h+a.s)}).attr("width",a.w).attr("height",a.h).style("fill-opacity",0),i.append("line").attr("class","LineClass").attr("x1",a.r).attr("y1",function(t,e){return e*(a.h+a.s)}).attr("x2",a.r+a.w/8).attr("y2",function(t,e){return e*(a.h+a.s)}).style("stroke",function(t){return 0===t.__data__.depth?"white":t.style.fill}).style("stroke-width",10)},function(){HI.register(HICirclepacking)}(),HICirclepacking.prototype.setConfig=function(t){this.hart=t};var that;HICirclepacking.prototype.draw=function(t){var e={},n=this.hart;that=this;var o=d3.select(n.placeholder).node().parentNode.getBoundingClientRect().width,r=d3.select(n.placeholder).node().parentNode.getBoundingClientRect().height;e.width=o,e.height=r;var a=["#01cce3","#5366d0","#ff1d45","#ffb200","#01c993","#5dffda","#ff3c80","#677077","#d3eeef","#9068be","#daad86","#3fb0ac","#fae596","#7082d9","#c43235","#fccdd3","#bbc4ef","#cdd422","#b5a397","#f89400"],i=d3.scale.ordinal().range(a);e.color=i;var l=d3.layout.pack().size([o,r]).value(function(t){return t.keyvalue});e.svg=s;var s=d3.select(n.placeholder).append("svg").attr("viewBox","0 0 "+o+" "+r).append("g");e.data=t,t||console.error("data not found");var d=that.initTooltip(n.placeholder),c=s.selectAll(".HI-Circlepacking-node").data(l.nodes(t)).enter().append("g").attr("class",function(t){return t.children?"HI-Circlepacking-node":"HI-Circlepacking-leaf HI-Circlepacking-node"}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),u=[];c.append("circle").attr("class","HI-Circlepacking-circle").attr("r",function(t){return t.r}).style("fill",function(t){return u.push(i(t.depth)),i(t.depth)}).style("opacity",function(t){return t.parent&&t.children?.3:1}).on("mouseover",function(t){that.setTooltip(t);var e=that.tooltipContent(t);d.html(e);var n=that.tooltipStatus,o=void 0;o=n===!1?"none":"block",d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",o)}).on("mouseout",function(t){d3.select(".HI-Core-tooltip").style("opacity",0).style("display","none")});_.uniq(u);return c.filter(function(t){return!t.children}).append("text").attr("dy",".3em").style("text-anchor","middle").text(function(t){return t.keyvalue.toString().substring(0,t.r/4)}).on("mouseover",function(t){that.setTooltip(t);var e=that.tooltipContent(t),n=that.tooltipStatus,o=void 0;o=n===!1?"none":"block",d.html(e),d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",o)}).on("mouseout",function(t){d3.select(".HI-Core-tooltip").style("opacity",0)}),this.node=c,this.setLegend(n.placeholder),this.infoWindow(n.placeholder),e},HICirclepacking.prototype.tooltipContent=function(t){var e;if(isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);e="<table>";var n=t.parentArray.length;if(0===n)e+="<tr><td>"+t.key+"</td></tr>";else if(n>1){for(var o=1;o<n;o++)e+="<tr><td>"+t.parentArray[o].key+"</td><td>"+t.parentArray[o].keyvalue+"</td></tr>";e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>"}else e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>";return e+="<table>"},function(){HI.register(HIDendrogram)}(),HIDendrogram.prototype.setConfig=function(t){this.hart=t};var that;HIDendrogram.prototype.draw=function(t){function e(){d3.select(i.placeholder).select("svg").attr("viewBox","0 0 "+window.innerWidth+" "+s)}function n(t){for(var e="";t.parent;)e+="key-"+t.key+"value-"+t.keyvalue,t=t.parent;return e+="key-"+t.key+"value-"+t.keyvalue}function o(t){if(t.children)for(var e=t.children.length,r=0;r<e;r++)f.selectAll('path[data-path="source-'+t.keyvalue+"target-"+t.children[r].keyvalue+"sourceparentinfo-"+n(t.children[r])+'"]').style("stroke","green"),o(t.children[r])}function r(t){that.setTooltip();var e=that.tooltipContent(t);if(e){h.html(e);var r=that.tooltipStatus,a=void 0;a=r===!1?"none":"block",d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",a)}for(o(t);t.parent;)f.selectAll('path[data-path="source-'+t.parent.keyvalue+"target-"+t.keyvalue+"sourceparentinfo-"+n(t)+'"]').style("stroke","red"),g.select('text[data-text="'+n(t)+'"]').text(t.keyvalue),t=t.parent;g.selectAll('text[data-text ="key-'+t.key+"value-"+t.keyvalue+'"]').text(t.keyvalue)}function a(){g.selectAll("text.HI-Dendrogram-text").text(null),f.selectAll("path.HI-Dendrogram-link").style("stroke","#ccc"),d3.select(".HI-Core-tooltip").style("opacity",0).style("display","none")}var i=this.hart;that=this;var l=d3.select(i.placeholder).node().getBoundingClientRect().width,s=d3.select(i.placeholder).node().getBoundingClientRect().height,d=d3.layout.cluster().size([s,.75*l]),c=["#01cce3","#5366d0","#ff1d45","#ffb200","#01c993","#5dffda","#ff3c80","#677077","#d3eeef","#9068be","#daad86","#3fb0ac","#fae596","#7082d9","#c43235","#fccdd3","#bbc4ef","#cdd422","#b5a397","#f89400"],u=d3.scale.ordinal().range(c);t||console.error("data not found");var p=d3.svg.diagonal().projection(function(t){return[t.y,t.x]}),f=d3.select(i.placeholder).append("svg").attr("class","HI-Dendrogram-svg").attr("viewBox","0 0 "+l+" "+s).append("g").attr("transform","translate("+.05*l+",0)");d3.select("window").on("resize",e);var h=that.initTooltip(i.placeholder),y=d.nodes(t),v=d.links(y),g=(f.selectAll(".HI-Dendrogram-link").data(v).enter().append("path").attr("class","HI-Dendrogram-link").attr("data-path",function(t){for(var e="",n=t.target;n.parent;)e+="key-"+n.key+"value-"+n.keyvalue,n=n.parent;return e+="key-"+n.key+"value-"+n.keyvalue,"source-"+t.source.keyvalue+"target-"+t.target.keyvalue+"sourceparentinfo-"+e}).attr("d",p),f.selectAll(".HI-Dendrogram-node").data(y).enter().append("g").attr("class","HI-Dendrogram-node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).on("mouseover",r).on("mouseout",a));g.append("circle").attr("r",4.5).style("fill",function(t){return u(t.parent?t.parent.keyvalue:t.keyvalue)});g.append("text").attr("class","HI-Dendrogram-text").attr("data-text",function(t){for(var e="";t.parent;)e+="key-"+t.key+"value-"+t.keyvalue,t=t.parent;return e+="key-"+t.key+"value-"+t.keyvalue}).attr("dx",function(t){return t.children?-8:8}).attr("dy",function(t){return t.parent?3:-10}).style("text-anchor",function(t){return t.parent?(t.children,"end"):"start"});this.node=g,this.infoWindow(i.placeholder)},HIDendrogram.prototype.tooltipContent=function(t){var e;if(isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);if(e="<table>",isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);var n=t.parentArray.length;if(0===n)e+="<tr><td>"+t.key+"</td></tr>";else if(n>1){for(var o=1;o<n;o++)e+="<tr><td>"+t.parentArray[o].key+"</td><td>"+t.parentArray[o].keyvalue+"</td></tr>";e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>"}else e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>";return e+="</table>"};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},HIMapObject={};!function(){HI.register(HIMap)}(),HIMap.prototype.setConfig=function(t){this.hart=t},HIMap.prototype.getMap=function(){return HIMapObject};var that;HIMap.prototype.draw=function(t){function e(){C.attr("x1",function(t){return u.latLngToLayerPoint(t[0].LatLng).x}).attr("y1",function(t){return u.latLngToLayerPoint(t[0].LatLng).y}).attr("x2",function(t){return u.latLngToLayerPoint(t[1].LatLng).x}).attr("y2",function(t){return u.latLngToLayerPoint(t[1].LatLng).y})}function n(){m.attr("transform",function(t){return"translate("+u.latLngToLayerPoint(t.LatLng).x+","+u.latLngToLayerPoint(t.LatLng).y+")"})}function o(t,e){if(t.children.length)for(var n=t.children.length,r=0;r<n;r++)o(t.children[r],e),Object.keys(t.property).length>0&&t.key===e&&f.push(t)}var r=this.hart;that=this;for(var a=(d3.select(r.placeholder).node().parentNode.getBoundingClientRect().width,0);a<r.data.Dimension.length;a++)if("object"===_typeof(r.data.Dimension[a])){var i=Object.keys(r.data.Dimension[a]),l=r.data.Dimension[a];break}var s=l[i[0]].property.coordinate,d=["#01cce3","#5366d0","#ff1d45","#ffb200","#01c993","#5dffda","#ff3c80","#677077","#d3eeef","#9068be","#daad86","#3fb0ac","#fae596","#7082d9","#c43235","#fccdd3","#bbc4ef","#cdd422","#b5a397","#f89400"],c=d3.scale.ordinal().range(d);d3.select(r.placeholder).append("div").attr("id","map").attr("style","width: 100%; height: 100%");var u=L.map("map").setView([r.data.jsondata[0][s[0]],r.data.jsondata[0][s[1]]],4),p='<a href="http://openstreetmap.org">OpenStreetMap</a>';L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; "+p+" Contributors",maxZoom:18,minZoom:1}).addTo(u),u._initPathRoot();for(var f=[],h=d3.select("#map").select("svg"),y=h.append("g"),a=0;a<r.data.Dimension.length;a++)if("object"===_typeof(r.data.Dimension[a])){var v=Object.keys(r.data.Dimension[a]);o(t,v[0])}var g,k=(L.popup(),that.initTooltip(r.placeholder)),b=r.data.jsondata;b.forEach(function(t){Object.keys(t)}),g=f;var I=g.length;g.forEach(function(t){var e=Object.keys(t.property.containsCoordinate);t.LatLng=new L.LatLng(t.property.containsCoordinate[e[0]],t.property.containsCoordinate[e[1]])});for(var m=y.selectAll(".circleclass"+g[0].key).data(g).enter().append("circle").attr("class",function(t){return"circleclass"+t.key}).style("stroke","black").style("opacity",.6).style("fill",function(t){return c(t.keyvalue)}).attr("r",function(t){return"Traval_Destination"===t.key?8:6}).on("mouseover",function(t){that.setTooltip();var e=that.tooltipContent(t);if(e){k.html(e);var n=that.tooltipStatus,o=void 0;o=n===!0?"block":"none",d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",o)}}).on("mouseout",function(){d3.select(".HI-Core-tooltip").style("opacity",0).style("display","none")}),H=[],a=0;a<I/2;a++)g[a].key!==g[Math.floor(I/2)+a].key&&H.push([g[a],g[I/2+a]]);var C=y.selectAll("line").data(H).enter().append("line").style("stroke","black");u.on("viewreset",n),u.on("viewreset",e),n(),e(),this.node=m,this.infoWindow(r.placeholder),HIMapObject=u},HIMap.prototype.tooltipContent=function(t){var e;if(isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);e="<table>",e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>";var n=Object.keys(t.property.containsCoordinate);return e+="<tr><td>LAT:</td><td>"+t.property.containsCoordinate[n[0]]+"</td></tr>",e+="<tr><td>Long:</td><td>"+t.property.containsCoordinate[n[1]]+"</td></tr>",e+="</table>"},HIMap.prototype.infoWindow=function(t){var e=this,n=e.nodeValue(),o=d3.select(t).append("div").attr("id","HI-infoWindow").attr("class","col-md-12").attr("class","HI-Core-popup").style("z-index",2e3).style("display","none");n.on("click",function(t){var n=" ",r=d3.event.pageX,a=d3.event.pageY,i=void 0,l=[],s=0;that.hart.data.Dimension.length+2;e.isInfoWindowDisplay===!1?(i="none",e.isTooltipShow===!0?that.tooltipStatus=!0:that.tooltipStatus=!1):(i="block",that.tooltipStatus=!1),o.style("left",r+"px").style("top",a+"px");var d='<span id="close" class="HI-Core-InfoWindowCloseButton"><i class="fa fa-times" aria-hidden="true"></i></span>';l=e.infoWindowContent(t),d+='<span id ="left" class = "HI-Core-infoWindowLeftButton"><i class="fa fa-arrow-left" aria-hidden="true"></i></i></span>',d+='<span id ="right" class = "HI-Core-infoWindowRightButton"><i class="fa fa-arrow-right" aria-hidden="true"></i></span>',n="<table class='table_Class-informationWindow'>";for(var c=l[s].length,u=0;u<c;u++)n+="<tr><td>"+l[s][u].key+"</td><td>"+l[s][u].keyvalue+"</td></tr>";n+="</table>",n=d+n,d3.select("#HI-infoWindow").style("opacity",.9).style("display",i),o.html(n),d3.select("#HI-infoWindow").select("#right").on("click",function(){var t="";if(s<0?s=0:s+=1,s<l.length){t="<table class='table_Class-informationWindow'>";for(var e=0;e<c;e++)t+="<tr><td>"+l[s][e].key+"</td><td>"+l[s][e].keyvalue+"</td></tr>";t+="</table>",d3.select("#HI-infoWindow").select(".table_Class-informationWindow").html(t)}else s=l.length}),d3.select("#HI-infoWindow").select("#left").on("click",function(){var t="";if(s>=l.length?s=l.length-1:s-=1,s>=0){t="<table class='table_Class-informationWindow'>";for(var e=0;e<c;e++)t+="<tr><td>"+l[s][e].key+"</td><td>"+l[s][e].keyvalue+"</td></tr>";t+="</table>",d3.select("#HI-infoWindow").select(".table_Class-informationWindow").html(t)}}),d3.select("#close").on("click",function(){d3.select("#HI-infoWindow").style("opacity",0).style("display","none"),e.isTooltipShow===!0?that.tooltipStatus=!0:that.tooltipStatus=!1})})},HIMap.prototype.infoWindowContent=function(t){var e="",n=[];return isFunction(This.infoWindow.Content)?e=This.infoWindow.Content(t):n=setcontent(t)},HIMap.prototype.setTooltipStatus=function(t){null!==t?that.tooltipStatus=t:that.tooltipStatus=!1},HIMap.prototype.setInfoWindowStatus=function(t){null!==t?this.isInfoWindowDisplay=t:this.isInfoWindowDisplay=!0},function(){HI.register(HIRadialDendrogram)}(),HIRadialDendrogram.prototype.setConfig=function(t){this.hart=t};var that,color;HIRadialDendrogram.prototype.draw=function(t){function e(t){function e(t){for(var e="";t.parent;)e+="key-"+t.key+"value-"+t.keyvalue,t=t.parent;return e+="key-"+t.key+"value-"+t.keyvalue}function n(t){if(t.children)for(var o=t.children.length,r=0;r<o;r++)c.selectAll('path[data-path="source-'+t.keyvalue+"target-"+t.children[r].keyvalue+"sourceparentinfo-"+e(t.children[r])+'"]').style("stroke","green"),n(t.children[r])}that.setTooltip();var o=that.tooltipContent(t);if(o){u.html(o);var r=that.tooltipStatus,a=void 0;a=r===!1?"none":"block",d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",a)}for(n(t);t.parent;)c.selectAll('path[data-path="source-'+t.parent.keyvalue+"target-"+t.keyvalue+"sourceparentinfo-"+e(t)+'"]').style("stroke","red"),h.select('text[data-text="'+e(t)+'"]').text(t.keyvalue),t=t.parent;h.selectAll('text[data-text ="key-'+t.key+"value-"+t.keyvalue+'"]').text(t.keyvalue)}function n(){h.selectAll("text.HI-RadialDendrogram-text").text(null),c.selectAll("path.HI-RadialDendrogram-link").style("stroke","#ccc"),d3.select(".HI-Core-tooltip").style("display","none")}var o=this.hart;that=this;var r=d3.select(o.placeholder).node().parentNode.getBoundingClientRect().width,a=d3.select(o.placeholder).node().parentNode.getBoundingClientRect().height,i=["#01cce3","#5366d0","#ff1d45","#ffb200","#01c993","#5dffda","#ff3c80","#677077","#d3eeef","#9068be","#daad86","#3fb0ac","#fae596","#7082d9","#c43235","#fccdd3","#bbc4ef","#cdd422","#b5a397","#f89400"],l=d3.scale.ordinal().range(i),s=d3.layout.tree().size([360,a/2*.95]).separation(function(t,e){return(t.parent==e.parent?1:2)/t.depth}),d=d3.svg.diagonal.radial().projection(function(t){return[t.y,t.x/180*Math.PI]}),c=d3.select(o.placeholder).append("svg").attr("class","HI-RadialDendrogram-svg").attr("viewBox","0 0 "+r+" "+a).append("g").attr("transform","translate("+r/2+","+a/2+")");t||console.error("data not found");var u=that.initTooltip(o.placeholder),p=s.nodes(t),f=s.links(p),h=(c.selectAll(".HI-RadialDendrogram-link").data(f).enter().append("path").attr("class","HI-RadialDendrogram-link").attr("data-path",function(t){for(var e="",n=t.target;n.parent;)e+="key-"+n.key+"value-"+n.keyvalue,n=n.parent;return e+="key-"+n.key+"value-"+n.keyvalue,"source-"+t.source.keyvalue+"target-"+t.target.keyvalue+"sourceparentinfo-"+e}).attr("d",d),c.selectAll(".HI-RadialDendrogram-node").data(p).enter().append("g").attr("class","HI-RadialDendrogram-node").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).on("mouseover",e).on("mouseout",n));h.append("circle").attr("r",5).style("fill",function(t){return l(t.parent?t.parent.keyvalue:t.keyvalue)});h.append("text").attr("class","HI-RadialDendrogram-text").attr("data-txt",function(t){for(var e="";t.parent;)e+="key-"+t.key+"value-"+t.keyvalue,t=t.parent;return e+="key-"+t.key+"value-"+t.keyvalue}).attr("dx",function(t){return t.children?-8:8}).attr("dy",function(t){return t.parent?3:-10}).style("text-anchor",function(t){return t.parent?(t.children,"end"):"start"}).style("font-faily","verdana");this.node=h,this.infoWindow(o.placeholder)},HIRadialDendrogram.prototype.tooltipContent=function(t){var e;if(isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);e="<table>";var n=t.parentArray.length;if(0===n)e+="<tr><td>"+t.key+"</td></tr>";else if(n>1){for(var o=1;o<n;o++)e+="<tr><td>"+t.parentArray[o].key+"</td><td>"+t.parentArray[o].keyvalue+"</td></tr>";e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>"}else e+="<tr><td>"+t.key+"</td><td>"+t.keyvalue+"</td></tr>";return e+="</table>"};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(){HI.register(HIBubblechart)}(),HIBubblechart.prototype.setConfig=function(t){this.hart=t};var that;HIBubblechart.prototype.draw=function(t){function e(t){return t.children.length?void t.children.forEach(function(t){e(t)}):(p.node=t,p.value=t.keyvalue,o.push(p),void(p={}))}that=this;var n=this.hart,o=(d3.select(n.placeholder).node().parentNode.getBoundingClientRect(),[]),r={children:o},a=d3.select(n.placeholder).node().parentNode.getBoundingClientRect().width,i=d3.select(n.placeholder).node().parentNode.getBoundingClientRect().height,l=["#01cce3","#5366d0","#ff1d45","#ffb200","#01c993","#5dffda","#ff3c80","#677077","#d3eeef","#9068be","#daad86","#3fb0ac","#fae596","#7082d9","#c43235","#fccdd3","#bbc4ef","#cdd422","#b5a397","#f89400"],s=(d3.format(",d"),
d3.scale.ordinal().range(l)),d=d3.layout.pack().sort(null).size([a,i]).padding(1.5),c=d3.select(n.placeholder).append("svg").attr("viewBox","0 0 "+a+" "+i).attr("class","bubble"),u=that.initTooltip(n.placeholder),p={};e(t);var f=c.selectAll(".HI-Bubblechart-node").data(d.nodes(r).filter(function(t){return!t.children})).enter().append("g").attr("class","HI-Bubblechart-node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),h=[];f.append("circle").attr("r",function(t){return t.r}).style("fill",function(t){return h.push(s(t.node.parent.keyvalue)),s(t.node.parent.keyvalue)}).on("mouseover",function(t){that.setTooltip();var e=that.tooltipContent(t);u.html(e);var n=that.tooltipStatus,o=void 0;o=n===!1?"none":"block",d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",o)}).on("mouseout",function(t){d3.select(".HI-Core-tooltip").style("opacity",0).style("display","none")}),f.append("text").attr("dy",".3em").style("text-anchor","middle").text(function(t){return t.value.toString().substring(0,t.r/4)}).on("mouseover",function(t){that.setTooltip();var e=that.tooltipContent(t);u.html(e);var n=that.tooltipStatus,o=void 0;o=n===!1?"none":"block",d3.select(".HI-Core-tooltip").style("opacity",.9).style("display",o)}).on("mouseout",function(t){d3.select(".HI-Core-tooltip").style("opacity",0).style("display","none")});_.uniq(h);this.node=f,this.infoWindow(n.placeholder)},HIBubblechart.prototype.tooltipContent=function(t){var e;if(isFunction(This.tooltip.Content))return e=This.tooltip.Content(t);var n=t.node.parentArray.length;e="<table>";for(var o=1;o<n;o++)e+="<tr><td>"+t.node.parentArray[o].key+"</td><td>"+t.node.parentArray[o].keyvalue+"</td></tr>";return e+="<tr><td>"+t.node.key+"</td><td>"+t.node.keyvalue+"</td></tr>",e+="</table>"},HIBubblechart.prototype.infoWindowContent=function(t){var e="";return isFunction(This.infoWindow.Content)?e=This.infoWindow.Content(t):(e="<table class='table_Class-informationWindow'>",e+="<tr><td>"+t.node.key+"</td><td>"+t.node.keyvalue+"</td></tr>",e+="</table>")},HIBubblechart.prototype.updateDataAttributes=function(t){var e=this.nodeValue(),n=Object.keys(t),o=[],r=[];n.forEach(function(e){"object"!==_typeof(t[e])?r.push({key:e,color:t[e]}):Array.isArray(t[e].value)?t[e].value.forEach(function(n){o.push({key:e,value:n,color:t[e].color})}):o.push({key:e,value:t[e].value,color:t[e].color})}),r.forEach(function(t){e.style("fill",function(e){return e.node.key===t.key?t.color:d3.rgb(d3.select(this).style("fill"))})}),o.forEach(function(t){e.style("fill",function(e){return e.node.key===t.key&&e.node.keyvalue===t.value?t.color:d3.rgb(d3.select(this).style("fill"))})}),this.updateTooltipAttributes("dataColor",t)};
//# sourceMappingURL=HICharts.js.map
