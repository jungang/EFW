"use strict";var $=window.$;window.HDIUI=window.HDIUI||{},window.HDIUI.about=function(){var e;return e=$.get(window.DashboardGlobals.productInfo),e.done(function(e){try{var t,o,n;e="string"==typeof e?JSON.parse(e):e,t="<p>";for(o in e)hasProp.call(e,o)&&(n=e[o],t+="<b>"+o+"</b> : "+n+"<br>");return t+="</p>",bootbox.alert({title:"About HI",message:t})}catch(i){console.warn(i),console.warn("Failed to start about information")}})},$("[data-about=hdi]").on("click",function(e){window.HDIUI.about(),e.preventDefault()});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){HDIUI.deepFreeze=function(e){var t=Object.getOwnPropertyNames(e);return t.forEach(function(t){var o=e[t];"object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&HDIUI.deepFreeze(o)}),Object.freeze(e)},HDIUI.deepFreeze(window.DashboardGlobals.user)}(),function(){$(document).ready(function(){try{var e=function(){for(var e=document.cookie.split(";"),t={},o=0,n=e.length;o<n;o++){var i=e[o].split("=");2===i.length&&(t[i[0].trim()]=i[1].trim())}return t},t=function(){document.body.contains(n)||document.body.appendChild(n)},o=function(){document.body.contains(n)&&document.body.removeChild(n)},n=document.createElement("div");n.innerHTML='<div style="position:fixed; right:15px; bottom:15px; z-index: 9999"><div class="alert alert-warning"><button type="button" class="close" id="session-alert-close"><span>&times;</span></button><p> Your session will expire in:<span id="session-timer">0:00</span></p>';var i=document.createElement("div");i.id="session-timeout-block",i.classList.add("modal"),i.classList.add("fade"),i.innerHTML='<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Session Expired!</h4></div><div class="modal-body"><p>Your session has expired. Please login to continue</p></div><div class="modal-footer"><button type="button" class="btn btn-primary" id="timeout-redirect">OK</button></div></div></div>',document.body.appendChild(i);var a=0,r=5,s=18e4,d=25e3,l=5e3,c=Math.abs(e().sessionExpiry),u=Math.abs(e().serverTime),p=Math.abs(e().serverTime),f=n.querySelector("#session-alert-close");f.addEventListener("click",function(){document.body.contains(n)&&document.body.removeChild(n),a=r});var m=function v(){var n=e(),i=Math.abs(n.sessionExpiry),r=Math.abs(n.serverTime);p<=i?u==r&&c==i?p+=1e3:(u=p=r,c=i):t();var f=i-p;if(f<s&&a<=0||f<d){if(t(),f<=l)return o(),$("#session-timeout-block").modal({backdrop:"static"}),void $("#timeout-redirect").on("click",function(){window.location.reload()});var m=Math.floor(f/6e4),b=Math.floor(f/1e3%60);b=b<10?"0"+b:b,document.getElementById("session-timer").innerHTML=m+":"+b}else o(),a>0&&a--;setTimeout(v,999)};m()}catch(b){console.warn(b),console.warn("failed to start session notifier")}})}(),function(e){var t=e.$;t(document).ready(function(){window.addEventListener("popstate",function(e){e.stopPropagation(),history.pushState(null,null)},!1),t(document).on("keydown",function(e){if(8===e.which&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName)return e.preventDefault()}),frames.length>0&&(frames[0].onclick=function(e){t("li.dropdown").is(e.target)||0!==t("li.dropdown").has(e.target).length||0!==t(".open").has(e.target).length||t("li.dropdown").removeClass("open")}),t(".hi-hideBrowserContextMenu").bind("contextmenu",function(e){return e.preventDefault(),!1})})}(window),window.onload=function(){if("undefined"!=typeof InstallTrigger){var e=document.getElementById("dashboard-canvas");history.pushState(null,null),window.addEventListener("popstate",function(t){t.preventDefault(),e&&(e.src=""),history.pushState(null,null)},!1)}else if(document.documentMode){var t=document.getElementById("dashboard-canvas");history.pushState(null,null),window.addEventListener("popstate",function(e){t&&(t.src=""),history.pushState(null,null)},!1)}};
//# sourceMappingURL=utilities.js.map
